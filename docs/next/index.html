<!DOCTYPE html>
<html>
	<head>
		<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-alpha.4/css/materialize.min.css">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta charset="utf-8">
		<style>
		*{
			margin:0;
			padding:0;
			width:100%;
		}
		html,body{
			background-color:black;
		}
		.card{
			background-color:rgba(255,255,255,0.8);
		}
		.card-panel{
			padding:0 5%;
		}
		#logo_img{
			position:fixed;
			margin:5% 20%;
			width:60%;
			height:auto;
			background-color:transparent;
			z-index:1000;
		}
		#tab{
			width:90%;
			margin:0 5%;
			position:fixed;
			top:24vw;
			z-index:1000;
		}
		#main{
			position:absolute;
			top:35vw;
		}
		.tab>a{
			font-size:0.85em !important;
		}
		
		</style>
	</head>
	<body>
		<img id="logo_img" alt="logo" src="img/logo.png">
		<div id="tab">
			<ul class="tabs grey darken-3">
				<li class="tab col s3"><a id="a" href="#about" class="white-text waves-effect waves-yellow">About</a></li>
				<li class="tab col s3"><a id="f" href="#features" class="white-text waves-effect waves-yellow">Features</a></li>
				<li class="tab col s3"><a id="c" href="#commands" class="white-text waves-effect waves-yellow">Commands</a></li>
				<li class="tab col s3"><a id="d" href="#developer" class="white-text waves-effect waves-yellow">Developer</a></li>
			</ul>
		</div>
		
		<div id="main">
			<div id="about" class="card-panel">
				<h3 class="card-title">About</h3>
			</div>
			<div class="container">
				<div class="row">
					<div class="col s12">
						<div class="card">
							<div class="card-content">
								<span class="card-title">VAWNとは</span>
								<p>VAWNは様々なSNSから利用できるバーチャルアシスタントです。その名は "a Virtual Assistant Works on Node.js" に由来します。VAWNは多くの開発者によって日々改善が施されています。</p>
							</div>
						</div>
					</div>
				</div>
			</div>

			<div id="features" class="card-panel">
				<h3 class="card-title">Features</h3>
			</div>
			<div class="container">
				<div class="row">
					<div class="col s12 m6 l4">
						<div class="card">
							<div class="card-content">
								<span class="card-title">文字ベース対話型</span>
								<p>VAWNは多くのバーチャルアシスタントと異なり文字ベースのアシスタントです。そのため声を出しづらい場面でも気にせず使うことができます。</p>
							</div>
						</div>
					</div>
					<div class="col s12 m6 l4">
						<div class="card">
							<div class="card-content">
								<span class="card-title">高速な動作</span>
								<p>VAWNは大手ホスティングサービスのHerokuが運営するサーバーで動作しています。そのため高速なレスポンスが可能です。</p>
							</div>
						</div>
					</div>
					<div class="col s12 m6 l4">
						<div class="card">
							<div class="card-content">
								<span class="card-title">たくさんの機能</span>
								<p>VAWNはSNS向けBotでありながら多くの機能を有しています。さらに、その機能は日々追加・改善されています。</p>
							</div>
						</div>
					</div>
					<div class="col s12 m6 l4">
						<div class="card">
							<div class="card-content">
								<span class="card-title">独自の巻き込み機能</span>
								<p>VAWNへのコマンドにほかの人のメンションを含めるとVAWNからのリプライにその人を巻き込むことができます。</p>
							</div>
						</div>
					</div>
					<div class="col s12 m6 l4">
						<div class="card">
							<div class="card-content">
								<span class="card-title">溢れる遊び心</span>
								<p>VAWNには開発者の遊び心ある機能が組み込まれています。使っているうちに見つかるかも知れません。</p>
							</div>
						</div>
					</div>
					<div class="col s12 m6 l4">
						<div class="card">
							<div class="card-content">
								<span class="card-title">あなたと共に成長する</span>
								<p>ユーザーの皆さんがVAWNに話しかけるほどにVAWNは成長していきます。今後にご期待ください。</p>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>



		<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-alpha.4/js/materialize.min.js"></script>
		<script>
		document.addEventListener('DOMContentLoaded', function() {

			let logo = document.getElementById("logo_img");
			let tab = document.getElementById("tab");
			let logo_h , logo_w , logo_mt , logo_mb , logo_mr , logo_ml , tab_h , tab_w , tab_t , tab_mb , tab_mr , tab_ml , main_t ,sc;
			sc = window.pageYOffset;
			let position = function(){
				logo_h = parseInt(window.getComputedStyle(logo , "").height);
				logo_w = parseInt(window.getComputedStyle(logo , "").width);
				logo_mt = parseInt(window.getComputedStyle(logo , "").marginTop);
				logo_ml = parseInt(window.getComputedStyle(logo , "").marginLeft);
				tab_h = parseInt(window.getComputedStyle(tab , "").height);
				tab_w = parseInt(window.getComputedStyle(tab , "").width);
				tab_t = parseInt(window.getComputedStyle(tab , "").top);
				tab_ml = parseInt(window.getComputedStyle(tab , "").marginLeft);
				main_t = parseInt(window.getComputedStyle(document.getElementById("main") , "").top);
				logo.style.height = `auto`;
				logo.style.width = `${logo_w}px`;
				logo.style.margin = `${logo_mt}px ${logo_ml}px`;
				tab.style.height = `${tab_h}px`;
				tab.style.width = `${tab_w}px`;
				tab.style.margin = `${tab_ml}px`;
				document.getElementById("main").style.top = main_t;
			}
			position();
			document.onscroll = function(){
				sc = window.pageYOffset;
				if(sc <= main_t*1.2){
					logo.style.width = `${logo_w - window.pageYOffset}px`;
				}
				if(logo_ml >= sc){
					logo.style.marginLeft = `${logo_ml - sc}px`;
				}
				if(logo_mt >= sc/5){
					logo.style.marginTop = `${logo_mt - sc/5}px`;
				}
				if(parseInt(window.getComputedStyle(tab , "").width) > parseInt(document.documentElement.clientWidth)*0.3){
					tab.style.width = `${tab_w - window.pageYOffset}px`;
					console.log(parseInt(window.getComputedStyle(tab , "").width))
				}
				if(tab_ml >= sc){
					tab.style.marginLeft = `${tab_ml + sc}px`;
				}
				if(tab_t >= sc){
					tab.style.top = `${tab_t - sc}px`;
				}
			};
			M.Tabs.init(document.getElementsByClassName("tabs"));
			setTimeout("scrollTo(0,1)", 100);
		
			(function(){
				const top = "#top"; // ページトップ用のリンク
				const speed = 500; // スムーススクロールが完了するまでの時間 [ms]
				const easing = function (t, b, c, d) { // 移動量の計算関数
					return -c *(t/=d)*(t-2) + b;
				};
				document.addEventListener("click", function(e){
					const href = e.target.getAttribute("href");
					const targetIsInternalLink = (e.target.nodeName.toLowerCase() == "a") && /^#.+/.test(href);
					if (!targetIsInternalLink) return; // 内部リンク以外は何もしない
					const dest = href == top ? document.body : document.getElementById(href.slice(1)); // 移動先
					if (!dest) return;
					const start = window.pageYOffset; // 初期スクロール位置
					let head = logo_h + tab_h;
					const offsetTop = (function(e){ return e.getBoundingClientRect().top + window.pageYOffset })(dest); // 移動先の、最上位要素からのY座標
					let t = 0; // 現在時刻
					const c = offsetTop - start - head*1.5; // 終了値
					const startTime = new Date().getTime();
					const id = setInterval(function(){
						t = new Date().getTime() - startTime;
						const v = easing(t, 0, c, speed);
						window.scrollTo(0, v + start);
						if (c-1 <= v && v <= c+1) clearInterval(id);
					}, 10);
					e.preventDefault();
				});
			})();
		});

		</script>
	</body>
</html>